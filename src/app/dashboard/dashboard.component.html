<div class="flex column">
  <div class="container info-col">
    <div class="patient-bar no-margin">
      <div class="black-text flex row">
        <div class="flex column" style="justify-content: center; align-items: center;">
          <img src="{{userInfo.profile_picture}}" id="profile-picture" class="circle responsive-img"/>
          <span class="main-info">{{ userInfo.email }}</span>
          <span class="main-info">Homme</span>
        </div>
        <div style="width: 20px"></div>
        <div class="flex column full-width">
          <div class="card-title" style="display: flex; margin-bottom: 6px;">
            <span style="flex-grow: 1; margin-top: 4px;">{{ userInfo.first_name }} {{ userInfo.last_name | uppercase }}</span>
            <a class="waves-effect waves-light btn topbar-button" style="margin-right: 5px;" (click)="saveChanges()">
              <i class="material-icons left" style="margin-right: 10px;">save</i>
              Sauvegarder
            </a>
            <button mat-icon-button [matMenuTriggerFor]="patientOptionsMenu" style="width: 32px; height: 32px;">
              <mat-icon style="margin-bottom: 8px;">more_vert</mat-icon>
            </button>
            <mat-menu #patientOptionsMenu="matMenu" xPosition="before">
              <button mat-menu-item disabled>Envoyer un message</button>
              <button mat-menu-item (click)="deleteConnection()">Archiver le patient</button>
            </mat-menu>
          </div>
          <div class="simple-small-div"></div>
          <div class="row flex">
            <div class="column flex info-col">
              <p class="biometric-info">Poids (kg):</p>
              <input class="info-input" [(ngModel)]="userInfo.biometrics.mass"/>
              <p class="biometric-info">Taille (cm):</p>
              <input class="info-input" [(ngModel)]="userInfo.biometrics.height"/>
            </div>
            <div class="column flex info-col">
              <p class="biometric-info">Né le:</p>
              <input class="info-input" value="{{userInfo.biometrics.date_of_birth}}" disabled/>
              <p class="biometric-info">Type de diabète:</p>
              <input class="info-input" value="Type 1" disabled/>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="container tab-container full-width">
    <mat-tab-group mat-stretch-tabs class="main-tabs">
      <mat-tab label="Glycémies">
        <div class="tab-div">
          <div class="card full-width-card white" style="margin-top: 0;">
            <div class="card-content black-text">
              <span class="card-title" style="margin-bottom: 0;">Taux de glycémie</span>
              <div class="simple-small-div"></div>
              <canvas baseChart height="85"
                [datasets]="bsChartData"
                [labels]="bsChartLabels"
                [options]="bsChartOptions"
                [legend]="bsChartLegend"
                [chartType]="bsChartType">
              </canvas>
            </div>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Notes" disabled="true">
        <div class="tab-div">
          Notes go here
        </div>
      </mat-tab>
      <mat-tab label="Repas">
        <div class="tab-div">
          <div class="card full-width-card white no-margin">
            <div class="card-content black-text">
              <span class="card-title" style="margin-bottom: 0;">Liste des repas</span>
              <div class="simple-small-div"></div>
              <mat-list *ngIf="userInfo.meals">
                <a *ngFor="let meal of userInfo.meals" mat-list-item>
                  <h4 mat-line>{{meal.total_sugar.toFixed(2)}} g</h4>
                  <p mat-line>{{this.timestampFromNow(meal.timestamp)}}</p>
                </a>
              </mat-list>
            </div>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Planning" disabled="true">
        <div class="tab-div">
          Planning goes here
        </div>
      </mat-tab>
      <mat-tab label="Prises de sang">
        <div class="tab-div">
          <div class="card mid-width white no-margin">
            <div class="card-content black-text">
              <div class="card-title" style="display: flex; margin-bottom: 6px;">
                <span style="flex-grow: 1; margin-top: 4px;">Hémoglobine Glyquée (HbA1C)</span>
                <a class="waves-effect waves-light btn topbar-button" style="margin-right: 5px;" (click)="addHb()">
                  <i class="material-icons left" style="margin-right: 10px;">add</i>
                  Ajouter une valeur
                </a>
              </div>
              <div class="simple-small-div"></div>
              <canvas baseChart
                [datasets]="hbChartData"
                [labels]="hbChartLabels"
                [options]="hbChartOptions"
                [legend]="hbChartLegend"
                [chartType]="hbChartType">
              </canvas>
            </div>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>